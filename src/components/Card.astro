---
import Icon from 'astro-icon';
import Badge from './Badge.astro';

interface Props {
    title: string;
    link: string;
    badges: { color: [badges: Array<string>] };
}

const { title, link, badges = {} } = Astro.props;
---

<section
    x-data="{ shown: false }"
    x-intersect.once.full="shown = true"
    class="flex min-h-[100px]"
>
    <div
        class="flex w-full flex-col gap-4 rounded-2xl bg-black-900 p-6 transition-colors hover:bg-black-800"
        x-show="shown"
        x-transition.duration.700ms
    >
        <h2 class="text-xl font-bold">{title}</h2>
        <div class="flex flex-wrap gap-2">
            {
                Object.entries(badges).map(([color, badgeTexts]) =>
                    badgeTexts.map((badge) => (
                        <Badge text={badge} color={color} />
                    ))
                )
            }
        </div>
        <slot />
        <a
            href={link}
            class="group mt-auto inline-flex items-center font-bold transition-colors hover:text-red-500"
        >
            Learn more<Icon
                name="ic:round-arrow-right"
                class="inline h-8 transition-transform group-hover:translate-x-1"
            />
        </a>
    </div>
</section>
