<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/style.css" />
    <script
      defer
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
      type="module"
    ></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hudson's Playground</title>
  </head>
  <body>
    <section class="flex flex-col h-screen bg-gray-100" x-data="{activeTab: 'formField'}">

      <!-- tabs -->
      <div class="fixed bottom-0 w-full my-5 md:w-1/3">
        <a
          href="#"
          @click.prevent="activeTab = 'simpleButton'"
          class="w-full p-4 bg-white hover:bg-gray-50"
          x-bind:class="activeTab == 'simpleButton' ? 'border-b-8 border-b-blue-600 box-border' : ''"
        >
          Simple Button
        </a>
        <a
          href="#"
          @click.prevent="activeTab = 'formField'"
          class="w-full p-4 bg-white hover:bg-gray-50"
          x-bind:class="activeTab == 'formField' ? 'border-b-8 border-b-blue-600 box-border' : ''"
        >
          Form Field
        </a>
      </div>

      <!-- tab views -->
      <div class="w-3/4 p-8 m-auto overflow-hidden bg-white rounded-3xl h-2/3">

        <!-- simple button -->
        <div
          x-data="{show: false}"
          class="flex flex-col items-center justify-center h-full mx-auto"
          x-show="activeTab == 'simpleButton'"
          x-transition
        >
          <div class="flex items-center h-full justify-items-center">
            <p
              class="mt-8 text-center transition scale-50 opacity-0"
              :class="show ? 'opacity-100 scale-100' : 'opacity-0 scale-50'">
              I made a website from scratch!
            </p>
          </div>
          <button
            @click="show = ! show"
            class="w-full p-3 font-bold text-white uppercase transition-all rounded-full shadow-xl bg-gradient-to-tr from-blue-500 to-blue-400 shadow-blue-200/50 hover:shadow-lg hover:shadow-blue-200/50"
          >
            click me!
          </button>
        </div>

        <!-- form field -->
        <div
          x-data="{show: false}"
          class="flex flex-col items-center justify-between h-full mx-auto"
          x-show="activeTab == 'formField'"
          x-transition
        >
          <h1 class="flex flex-col w-full text-6xl font-black">hello...</h1>
          <form
            action="/"
            method="POST"
            @submit.prevent="submitData"
            x-data="contactForm()"
            class="space-y-8"
          >
            <div class="relative">
              <input type="text" id="name" name="name" placeholder="Name:" autocomplete="name" x-model="formData.name" class="px-4 py-2 placeholder-transparent bg-gray-100 rounded-lg peer focus:outline-none focus:outline-blue-400">
              <label for="name" class="absolute left-0 text-sm font-semibold text-black transition-all -top-6 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 peer-placeholder-shown:left-4 peer-focus:left-0 peer-focus:text-sm peer-focus:text-black peer-focus:-top-6 peer-focus:font-semibold peer-placeholder-shown:font-normal">Name:</label>
            </div>
            <div class="relative">
              <input type="email" id="email" name="email" placeholder="Email:" autocomplete="email" x-model="formData.email" class="px-4 py-2 placeholder-transparent bg-gray-100 rounded-lg peer focus:outline-none focus:outline-blue-400">
              <label for="email" class="absolute left-0 text-sm font-semibold text-black transition-all -top-6 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 peer-placeholder-shown:left-4 peer-focus:left-0 peer-focus:text-sm peer-focus:text-black peer-focus:-top-6 peer-focus:font-semibold peer-placeholder-shown:font-normal">Email:</label>
            </div>
            <div class="relative">
              <textarea type="text" rows="5" id="message" name="message" placeholder="Write a message..." x-model="formData.message" class="w-full px-4 py-2 placeholder-transparent bg-gray-100 rounded-lg peer focus:outline-none focus:outline-blue-400"></textarea>
              <label for="message" class="absolute left-0 text-sm font-semibold text-black transition-all -top-6 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 peer-placeholder-shown:left-4 peer-focus:left-0 peer-focus:text-sm peer-focus:text-black peer-focus:-top-6 peer-focus:font-semibold peer-placeholder-shown:font-normal">Message:</label>
            </div>

            <!-- catches the bots -->
            <input type="text" name="_honey" class="hidden">

            <button class="w-full p-3 font-bold text-white uppercase transition-all rounded-full shadow-xl bg-gradient-to-tr from-blue-500 to-blue-400 shadow-blue-200/50 hover:shadow-lg hover:shadow-blue-200/50" x-text="submitLabel"></button>
            <p class="" x-text="resultMessage"></p>
          </form> 
        </div>

      </div>
    </section>
    <div class="w-1/2">

    </div>
  </body>
  <script>
    function contactForm() {
      return {
        formData: {
          name: '',
          email: '',
          message: ''
        },
        resultMessage: '',
        submitting: false,
        submitLabel: "Say wassup",
        
        
        submitData() {
          this.submitLabel = "Sending..."
          this.submitting = true,
          this.resultMessage = '',

          fetch('https://formsubmit.co/ajax/f325bb1980fd7f5592805c11eca0aaeb', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Accept': 'application/json'
            },
            body: JSON.stringify(this.formData)
          })
          .then(res => {
            res.json()
          })
          .then(data => {
            console.log("data: " + data)
            this.resultMessage = 'Thanks!'
          })
          .catch(error => {
            console.log("ERROR; " + error)
            this.resultMessage = 'Ope...try again'
          })
          .finally(() => {
            this.submitting = false
            this.submitLabel = "Say wassup"
            this.name = ''
          })
        }        
      }
    }
  </script>
</html>
